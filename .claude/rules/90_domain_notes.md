# Domain Notes

## Domain concepts

- **リバースプロキシ**: クライアントからのリクエストを内部サービスに転送
- **DDNS**: Dynamic DNS - 動的IPアドレスとドメイン名の紐付け
- **ルーティング**: URLパスに基づくトラフィック転送先の決定
- **ヘルスチェック**: バックエンドサービスの稼働状態監視

## プロキシアーキテクチャ

```
[外部アクセス]
     │
     ▼
[LacisProxyGateway2] ─┬─▶ eat結 (192.168.3.242:3000/8080)
                      ├─▶ sorapiapps (192.168.3.241)
                      └─▶ Other services
```

## Non-obvious constraints

- **ポート競合**: eat結が3000/8080を使用中
- **同一サーバー**: 192.168.3.242でeat結と共存
- **nginxとの統合**: 既存のnginx設定との整合性必要
- **Omadaクラウド連携**: 最終的にOmadaからのポートフォワードを受ける

## "Foot-guns" (common failure modes)

### 問題1: サーバー上でのコード編集
- **問題**: gitで追跡されない変更が発生
- **検出**: git status で未追跡ファイル確認
- **修正**: ローカルに変更をコピーしてコミット

### 問題2: ポート競合
- **問題**: eat結やsorapiappsとポートが被る
- **検出**: `netstat -tlnp` でポート確認
- **修正**: 使用していないポートに変更

### 問題3: nginx設定ミス
- **問題**: ルーティングが正しく動作しない
- **検出**: `nginx -t` で設定テスト
- **修正**: 設定ファイル修正後 `systemctl reload nginx`

## 関連システム

| システム | URL | ポート | 備考 |
|---------|-----|--------|------|
| eat結 | /eatyui | 3000, 8080 | 同一サーバー |
| sorapiapps | /sorapiapps | - | 192.168.3.241 |
